/* Ottimizzazioni aggiuntive per il fullscreen su dispositivi mobili */

/* Fix specifico per iOS */
@supports (-webkit-touch-callout: none) {
  .ios-fullscreen {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    height: -webkit-fill-available !important;
    max-width: none !important;
    max-height: none !important;
    margin: 0 !important;
    padding: 0 !important;
    padding-top: env(safe-area-inset-top) !important;
    padding-right: env(safe-area-inset-right) !important;
    padding-bottom: env(safe-area-inset-bottom) !important;
    padding-left: env(safe-area-inset-left) !important;
    z-index: 9999 !important;
    transform: none !important;
    background-color: #000 !important;
  }

  /* Blocca orientamento video su iOS per landscape */
  .ios-fullscreen video {
    object-fit: contain !important;
    width: 100% !important;
    height: 100% !important;
  }
  
  /* Nascondi UI del browser su iOS */
  .ios-fullscreen {
    -webkit-appearance: none;
  }
  
  /* Fix per bug di dimensionamento video su iOS */
  @media screen and (orientation: landscape) {
    .ios-fullscreen video {
      height: 100vh !important;
      width: 100vw !important;
      transform: translateZ(0);
      object-position: center;
      position: absolute;
      top: 0;
      left: 0;
    }
    
    /* Assicurati che i controlli siano visibili sopra il video */
    .ios-fullscreen .player-controls {
      z-index: 10000;
      position: absolute;
      bottom: max(env(safe-area-inset-bottom), 0px);
      left: env(safe-area-inset-left);
      right: env(safe-area-inset-right);
      background: linear-gradient(transparent, rgba(0,0,0,0.7));
      padding: 8px;
    }
  }
}

/* Prevenire overflow durante fullscreen */
body.fullscreen-active {
  overflow: hidden !important;
  position: fixed;
  width: 100%;
  height: 100%;
  touch-action: pan-y pinch-zoom;
}

/* Nascondi chrome browser in PWA mode */
@media all and (display-mode: fullscreen) {
  .ios-fullscreen {
    height: 100vh !important;
    width: 100vw !important;
  }
}